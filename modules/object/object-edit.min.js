$(document).ready(function(){var e=$('<img src="'+$.glue.base_url+'modules/object/object-clone.png" alt="btn" title="clone object" width="32" height="32">');$(e).bind("click",function(e){var n=$(this).data("owner");$.glue.backend({method:"glue.clone_object",name:$(n).attr("id")},function(e){$.glue.sel.none();var t=$(n).clone();$(t).attr("id",e),$(t).css("left",$(n).position().left+$.glue.grid.x()+"px"),$(t).css("top",$(n).position().top+$.glue.grid.y()+"px"),$("body").append(t),$(t).trigger("glue-pre-clone"),$.glue.object.register(t),$.glue.sel.select(t),$.glue.object.save(t)})}),$.glue.contextmenu.register("object","object-clone",e,1),e=$('<img src="'+$.glue.base_url+'modules/object/object-transparency.png" alt="btn" title="change transparency" width="32" height="32">'),$(e).bind("glue-menu-activate",function(e){var t=$(this).data("owner"),t="change transparency ("+(100*parseFloat($(t).css("opacity"))).toFixed(0)+"%)";$(this).attr("title",t)}),$(e).bind("mousedown",function(e){var n=this,o=$(this).data("owner");return $.glue.slider(e,function(e,t){(e=!(e<-15)&&e<15?1:1-(Math.abs(e)-15)/300)<0&&(e=0),$(o).css("opacity",e)},function(e,t){$.glue.object.save(o),$(n).trigger("glue-menu-activate")}),!1}),$.glue.contextmenu.register("object","object-transparency",e,2),e=$('<img src="'+$.glue.base_url+'modules/object/object-zindex.png" alt="btn" title="bring object to foreground or background" width="32" height="32">'),$(e).bind("mousedown",function(e){var n=$(this).data("owner"),o=parseInt($(n).css("z-index"));return $.glue.slider(e,function(e,t){e<-15?$.glue.stack.to_bottom($(n)):e<15?parseInt($(n).css("z-index"))!==o&&(isNaN(o)?$(n).css("z-index",""):$(n).css("z-index",o)):$.glue.stack.to_top($(n))},function(e,t){$.glue.object.save(n),$.glue.stack.compress()}),!1}),$.glue.contextmenu.register("object","object-zindex",e,3),e=$('<img src="'+$.glue.base_url+'modules/object/object-link.png" alt="btn" title="make the object a link" width="32" height="32">'),$(e).bind("click",function(e){var a=$(this).data("owner");$.glue.backend({method:"glue.load_object",name:$(a).attr("id")},function(e){var n,o;e["#error"]?$.glue.error(e["#error"]):(n="",void 0!==e["#data"]["object-link"]&&(n=e["#data"]["object-link"]),o="",void 0!==e["#data"]["object-target"]&&(o=e["#data"]["object-target"]),old_linkdata=""==o?n:n+" "+o,null===(e=prompt("Enter link (e.g. http://hotglue.me or pagename or anchor name).\nTo add target specify its name after a space (e.g. http://hotglue.me _blank)",old_linkdata))||e==n+" "+o||(t=e.split(" "),link=t[0],target=t[1],null==link?$.glue.backend({method:"glue.object_remove_attr",name:$(a).attr("id"),attr:"object-link"}):($.glue.backend({method:"glue.update_object",name:$(a).attr("id"),"object-link":link}),void 0!==target&&$.glue.backend({method:"glue.update_object",name:$(a).attr("id"),"object-target":target})),""===o)||""!=target&&null!=target||$.glue.backend({method:"glue.object_remove_attr",name:$(a).attr("id"),attr:"object-target"}))},!1)}),$.glue.contextmenu.register("object","object-link",e),e=$('<img src="'+$.glue.base_url+'modules/object/object-target.png" alt="btn" title="get the name of this object (for linking to it)" width="32" height="32">'),$(e).bind("click",function(e){var t=$(this).data("owner"),t=$(t).attr("id").split(".").pop();prompt("You can link to this object by copying and pasting this string",$.glue.page+"."+t)}),$.glue.contextmenu.register("object","object-target",e),e=$('<img src="'+$.glue.base_url+'modules/object/object-symlink.png" alt="btn" title="make this object appear on all pages" width="32" height="32">'),$(e).bind("click",function(e){var t=$(this).data("owner");$.glue.backend({method:"glue.object_make_symlink",name:$(t).attr("id")})}),$.glue.contextmenu.register("object","object-symlink",e),e=$('<img src="'+$.glue.base_url+'modules/object/object-delete.png" alt="btn" title="delete object" width="32" height="32">'),$(e).bind("click",function(e){var t=$(this).data("owner"),n=$(t).attr("id");$.glue.object.unregister($(t)),$(t).remove(),$.glue.backend({method:"glue.delete_object",name:n}),$.glue.canvas.update()}),$.glue.contextmenu.register("object","object-delete",e,20)});